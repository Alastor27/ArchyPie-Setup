# Maintainer: archypie.project <archrgs.project@gmail.com>

pkgname=archy-uim
pkgver=1.8.8
pkgrel=0
pkgdesc='Multilingual Input Method Library'
url='https://github.com/uim/uim'
license=('custom:BSD')
arch=('x86_64')
depends=('libxft' 'libedit' 'm17n-lib')
makedepends=('intltool' 'gettext' 'gtk2' 'gtk3' 'qt5-x11extras' 'anthy' 'skk-jisyo')
conflicts=('uim')
provides=('uim')
source=("$pkgname::git+https://github.com/uim/uim#tag=$pkgver")
sha256sums=('SKIP')

prepare() {
  cd "$pkgname"

  git submodule update --init --recursive

  touch scm/json-parser-expanded.scm
}

build() {
  cd "${pkgname}"

  ./make-wc.sh --prefix=/usr
  make
}

package() {
  cd "${pkgname}"

  make DESTDIR="${pkgdir}" install
  install -Dm644 ./COPYING "${pkgdir}/usr/share/licenses/${pkgname}/LICENCE"
}
